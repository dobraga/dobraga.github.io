<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.68.3" />


<title>Mineração de Textos - Uma Abordagem Tidy - dobraga</title>
<meta property="og:title" content="Mineração de Textos - Uma Abordagem Tidy - dobraga">


  <link href='../../../../iconfinder_ArtificialIntelligence25_2890583.png' rel='icon' type='image/x-icon'/>



  








<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="../../../../css/fonts.css" media="all">
<link rel="stylesheet" href="../../../../css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="../../../../" class="nav-logo">
    <img src="../../../../images/iconfinder_ArtificialIntelligence25_2890583.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="https://github.com/dobraga">GitHub</a></li>
    
    <li><a href="https://www.linkedin.com/in/douglas-martins-mendes-braga-904495b5/">Linkedin</a></li>
    
    <li><a href="../../../../about/">Sobre</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">12 min read</span>
    

    <h1 class="article-title">Mineração de Textos - Uma Abordagem Tidy</h1>

    
    <span class="article-date">2020-08-08</span>
    

    <div class="article-content">
      
<link href="../../../../rmarkdown-libs/pagedtable/css/pagedtable.css" rel="stylesheet" />
<script src="../../../../rmarkdown-libs/pagedtable/js/pagedtable.js"></script>

<div id="TOC">
<ul>
<li><a href="#o-formato-tidy-para-texto"><span class="toc-section-number">1</span> O formato <em>tidy</em> para texto</a><ul>
<li><a href="#a-diferença-entre-o-formato-tidy-e-os-demais"><span class="toc-section-number">1.1</span> A diferença entre o formato <em>tidy</em> e os demais</a></li>
<li><a href="#a-função-unnest_tokens"><span class="toc-section-number">1.2</span> A função <code>unnest_tokens</code></a></li>
<li><a href="#obra-de-jane-austen-no-formato-tidy"><span class="toc-section-number">1.3</span> Obra de Jane Austen no formato <em>Tidy</em></a></li>
<li><a href="#o-pacote-gutenbergr"><span class="toc-section-number">1.4</span> O pacote gutenbergr</a><ul>
<li><a href="#h.g.-wells"><span class="toc-section-number">1.4.1</span> H.G. Wells</a></li>
</ul></li>
</ul></li>
</ul>
</div>

<style>
body {
text-align: justify}
</style>
<p>Esse texto é totalmente baseado no livro gratuito
<a href="https://www.tidytextmining.com/">Text Mining with R</a></p>
<p>Com isso, serão instalados os pacotes que serão utilizados.</p>
<pre class="r"><code>list.of.packages &lt;- c(
  &quot;tidyverse&quot;, &quot;gutenbergr&quot;, &quot;textdata&quot;
)

is.instaled &lt;- list.of.packages %in% installed.packages()
new.packages &lt;- list.of.packages[!(is.instaled)]
if(length(new.packages)) install.packages(new.packages)

library(tidyverse)
library(magrittr)</code></pre>
<div id="o-formato-tidy-para-texto" class="section level1">
<h1><span class="header-section-number">1</span> O formato <em>tidy</em> para texto</h1>
<p>Usando o princípio <em>tidy</em> para dados é muito útiol pois torna a manipulação de
dados mais simples e efetivas, isso também serve para dados textuais, a
estrutura <em>tidy</em> tem a seguinte estrutura:</p>
<ul>
<li>Cada variável é uma coluna;</li>
<li>Cada observação é uma linha;</li>
<li>Cada variável deve possuir apenas um tipo.</li>
</ul>
<p>Sendo assim, é definido que o formato <em>tidy</em> para texto é uma tabela com um
token por linha, o token é a unidade minima de análise, como por exemplo
palavras, estamos interessados em utilizar para uma análisem e tokenização é o
processo de separar o texto em tokens. Esse formato é diferente do formato que
é utilizado frequentemente, com frases ou matriz de documentos e termos.</p>
<div id="a-diferença-entre-o-formato-tidy-e-os-demais" class="section level2">
<h2><span class="header-section-number">1.1</span> A diferença entre o formato <em>tidy</em> e os demais</h2>
<p>Como comentado anteriormente, o formato <em>tidy</em> de texto é definido como uma
tabela possuindo um token por linha. Estruturar dados de texto dessa maneira
significa que eles estão em conformidade com os princípios de dados organizados
e podem ser manipulados com um conjunto de ferramentas consistentes. Vale a pena
contrastar com as maneiras como o texto é geralmente armazenado nas abordagens
de mineração de texto.</p>
<ul>
<li><p><strong>String</strong>: Textos, com certeza, pordem ser armazenados em formato de string,
ou em vetores de strings;</p></li>
<li><p><strong>Corpus</strong>: Esse tipo de objeto normalmente contem o texto bruto com alguns
metadados e detalhes adicionais;</p></li>
<li><p><strong>Matriz de documentos e termos</strong>: Esse tipo de representação é uma matriz
esparsa, ou seja, uma matriz onde muitas colunas não possuem valores, onde cada
linha é um documento que será analisado, e cada coluna é uma palavra.
Normalmente são preenchidos com a quantidade de aparições no documento
ou td-idf.</p></li>
</ul>
<p>Primeiramente, será analisado em como é feita a transformação e análise no
formato <em>tidy</em>.</p>
</div>
<div id="a-função-unnest_tokens" class="section level2">
<h2><span class="header-section-number">1.2</span> A função <code>unnest_tokens</code></h2>
<p>Emily Dickinson escreveu um texto adorável.</p>
<pre class="r"><code>text &lt;- c(&quot;Because I could not stop for Death -&quot;,
          &quot;He kindly stopped for me -&quot;,
          &quot;The Carriage held but just Ourselves -&quot;,
          &quot;and Immortality&quot;)

text</code></pre>
<pre><code>## [1] &quot;Because I could not stop for Death -&quot;  
## [2] &quot;He kindly stopped for me -&quot;            
## [3] &quot;The Carriage held but just Ourselves -&quot;
## [4] &quot;and Immortality&quot;</code></pre>
<p>Por enquanto esse é um vetor comum de texto que queremos analisar. Para
transformar em formato <em>tidy</em>, primeiramente é nescessário criar um data frame.</p>
<pre class="r"><code>text_df &lt;- tibble(line = 1:4, text = text)
text_df</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["line"],"name":[1],"type":["int"],"align":["right"]},{"label":["text"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"Because I could not stop for Death -"},{"1":"2","2":"He kindly stopped for me -"},{"1":"3","2":"The Carriage held but just Ourselves -"},{"1":"4","2":"and Immortality"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Nesse primeiro exemplo, temos apenas um documento, que neste caso é um poema,
mais a frente serão utilizados exemplos com mais documentos.</p>
<p>Para transformar no formato <em>tidy</em>, é nescessário fazer a quebra deste texto
em tokens (esse processo de chama <em>tokenization</em>), para isso, será utilizada
a função <code>unnest_tokens</code>.</p>
<pre class="r"><code>tidytext::unnest_tokens(
  text_df, 
  output = word, 
  input = text
)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["line"],"name":[1],"type":["int"],"align":["right"]},{"label":["word"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"because"},{"1":"1","2":"i"},{"1":"1","2":"could"},{"1":"1","2":"not"},{"1":"1","2":"stop"},{"1":"1","2":"for"},{"1":"1","2":"death"},{"1":"2","2":"he"},{"1":"2","2":"kindly"},{"1":"2","2":"stopped"},{"1":"2","2":"for"},{"1":"2","2":"me"},{"1":"3","2":"the"},{"1":"3","2":"carriage"},{"1":"3","2":"held"},{"1":"3","2":"but"},{"1":"3","2":"just"},{"1":"3","2":"ourselves"},{"1":"4","2":"and"},{"1":"4","2":"immortality"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Essa função necessita de três argumentos básicos, o primeiro precisa ser o
data frame, depois o nome da coluna que será criada com os tokens, e a coluna
de entrada</p>
</div>
<div id="obra-de-jane-austen-no-formato-tidy" class="section level2">
<h2><span class="header-section-number">1.3</span> Obra de Jane Austen no formato <em>Tidy</em></h2>
<p>Vamos usar o texto dos 6 romances completos e publicados de Jane Austen do
pacote janeaustenr (Silge 2016) e transformá-los em um formato <em>tidy</em>.
O pacote <code>janeaustenr</code> fornece esses textos linha por linha, em que uma linha, neste contexto, é uma linha de cada livro.</p>
<p>Serão criados dois campos um para marcar a linha em questão para manter o
controle do formato original e um para o capítulo.</p>
<pre class="r"><code>original_books &lt;- janeaustenr::austen_books() %&gt;% 
  group_by(book) %&gt;% 
  mutate(
    rn = row_number(),
    chapter = str_detect(
      text,
      regex(
        &quot;^chapter [\\divxlc]&quot;, 
        ignore_case = TRUE
      )
    ) %&gt;% as.integer()
  ) %&gt;% 
  ungroup()

original_books %&gt;% head(20)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["book"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["rn"],"name":[3],"type":["int"],"align":["right"]},{"label":["chapter"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"SENSE AND SENSIBILITY","2":"Sense & Sensibility","3":"1","4":"0"},{"1":"","2":"Sense & Sensibility","3":"2","4":"0"},{"1":"by Jane Austen","2":"Sense & Sensibility","3":"3","4":"0"},{"1":"","2":"Sense & Sensibility","3":"4","4":"0"},{"1":"(1811)","2":"Sense & Sensibility","3":"5","4":"0"},{"1":"","2":"Sense & Sensibility","3":"6","4":"0"},{"1":"","2":"Sense & Sensibility","3":"7","4":"0"},{"1":"","2":"Sense & Sensibility","3":"8","4":"0"},{"1":"","2":"Sense & Sensibility","3":"9","4":"0"},{"1":"CHAPTER 1","2":"Sense & Sensibility","3":"10","4":"1"},{"1":"","2":"Sense & Sensibility","3":"11","4":"0"},{"1":"","2":"Sense & Sensibility","3":"12","4":"0"},{"1":"The family of Dashwood had long been settled in Sussex.  Their estate","2":"Sense & Sensibility","3":"13","4":"0"},{"1":"was large, and their residence was at Norland Park, in the centre of","2":"Sense & Sensibility","3":"14","4":"0"},{"1":"their property, where, for many generations, they had lived in so","2":"Sense & Sensibility","3":"15","4":"0"},{"1":"respectable a manner as to engage the general good opinion of their","2":"Sense & Sensibility","3":"16","4":"0"},{"1":"surrounding acquaintance.  The late owner of this estate was a single","2":"Sense & Sensibility","3":"17","4":"0"},{"1":"man, who lived to a very advanced age, and who for many years of his","2":"Sense & Sensibility","3":"18","4":"0"},{"1":"life, had a constant companion and housekeeper in his sister.  But her","2":"Sense & Sensibility","3":"19","4":"0"},{"1":"death, which happened ten years before his own, produced a great","2":"Sense & Sensibility","3":"20","4":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Agora as linhas serão quebradas em tokens utilizando a função <code>unnest_tokens</code>.</p>
<pre class="r"><code>tidy_books &lt;- original_books %&gt;% 
  tidytext::unnest_tokens(word, text)

tidy_books %&gt;% head(20)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["book"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["rn"],"name":[2],"type":["int"],"align":["right"]},{"label":["chapter"],"name":[3],"type":["int"],"align":["right"]},{"label":["word"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Sense & Sensibility","2":"1","3":"0","4":"sense"},{"1":"Sense & Sensibility","2":"1","3":"0","4":"and"},{"1":"Sense & Sensibility","2":"1","3":"0","4":"sensibility"},{"1":"Sense & Sensibility","2":"3","3":"0","4":"by"},{"1":"Sense & Sensibility","2":"3","3":"0","4":"jane"},{"1":"Sense & Sensibility","2":"3","3":"0","4":"austen"},{"1":"Sense & Sensibility","2":"5","3":"0","4":"1811"},{"1":"Sense & Sensibility","2":"10","3":"1","4":"chapter"},{"1":"Sense & Sensibility","2":"10","3":"1","4":"1"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"the"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"family"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"of"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"dashwood"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"had"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"long"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"been"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"settled"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"in"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"sussex"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"their"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>tidytext::stop_words %&gt;% head(20)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["word"],"name":[1],"type":["chr"],"align":["left"]},{"label":["lexicon"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"a","2":"SMART"},{"1":"a's","2":"SMART"},{"1":"able","2":"SMART"},{"1":"about","2":"SMART"},{"1":"above","2":"SMART"},{"1":"according","2":"SMART"},{"1":"accordingly","2":"SMART"},{"1":"across","2":"SMART"},{"1":"actually","2":"SMART"},{"1":"after","2":"SMART"},{"1":"afterwards","2":"SMART"},{"1":"again","2":"SMART"},{"1":"against","2":"SMART"},{"1":"ain't","2":"SMART"},{"1":"all","2":"SMART"},{"1":"allow","2":"SMART"},{"1":"allows","2":"SMART"},{"1":"almost","2":"SMART"},{"1":"alone","2":"SMART"},{"1":"along","2":"SMART"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Agora serão removidos as palavras que não acrescentam informação a nossa
análise.</p>
<pre class="r"><code>tidy_books %&lt;&gt;% 
  anti_join(
    tidytext::stop_words, 
    by = c(&quot;word&quot; = &quot;word&quot;)
  )

tidy_books %&gt;% head(20)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["book"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["rn"],"name":[2],"type":["int"],"align":["right"]},{"label":["chapter"],"name":[3],"type":["int"],"align":["right"]},{"label":["word"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Sense & Sensibility","2":"1","3":"0","4":"sense"},{"1":"Sense & Sensibility","2":"1","3":"0","4":"sensibility"},{"1":"Sense & Sensibility","2":"3","3":"0","4":"jane"},{"1":"Sense & Sensibility","2":"3","3":"0","4":"austen"},{"1":"Sense & Sensibility","2":"5","3":"0","4":"1811"},{"1":"Sense & Sensibility","2":"10","3":"1","4":"chapter"},{"1":"Sense & Sensibility","2":"10","3":"1","4":"1"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"family"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"dashwood"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"settled"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"sussex"},{"1":"Sense & Sensibility","2":"13","3":"0","4":"estate"},{"1":"Sense & Sensibility","2":"14","3":"0","4":"residence"},{"1":"Sense & Sensibility","2":"14","3":"0","4":"norland"},{"1":"Sense & Sensibility","2":"14","3":"0","4":"park"},{"1":"Sense & Sensibility","2":"14","3":"0","4":"centre"},{"1":"Sense & Sensibility","2":"15","3":"0","4":"property"},{"1":"Sense & Sensibility","2":"15","3":"0","4":"generations"},{"1":"Sense & Sensibility","2":"15","3":"0","4":"lived"},{"1":"Sense & Sensibility","2":"16","3":"0","4":"respectable"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Quais são as palavras mais utilizadas?</p>
<pre class="r"><code>tidy_books %&gt;% 
  count(word, sort=T) %&gt;% 
  filter(n &gt; 600) %&gt;% 
  mutate(word = reorder(word, n)) %&gt;% 
  ggplot(aes(word, n)) + 
  geom_col() + 
  coord_flip()</code></pre>
<p><img src="../../../../post/2020-08-08-tidytext_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="o-pacote-gutenbergr" class="section level2">
<h2><span class="header-section-number">1.4</span> O pacote gutenbergr</h2>
<p>O pacote <a href="https://ropensci.org/tutorials/gutenbergr_tutorial/"><code>gutenbergr</code></a>
fornece acesso ao repositório de livros do <a href="https://www.gutenberg.org/wiki/PT_Principal"><strong>projeto Gutenberg</strong></a>,
que segundo o próprio site, “O Project Gutenberg oferece-lhe mais de 38.000
livros eletrónicos gratuitos: escolha entre livros grátis em formato epub ou
livros grátis em formato kindle, descarregue-os ou leia-os em linha.”.</p>
<div id="h.g.-wells" class="section level3">
<h3><span class="header-section-number">1.4.1</span> H.G. Wells</h3>
<p>Para encontrar os id’s dos livros do escritor H.G. Wells, pode realizar o
seguinte filtro:</p>
<pre class="r"><code>gutenbergr::gutenberg_metadata %&gt;% 
  filter(grepl(&quot;Wells, H. G.&quot;, author))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["gutenberg_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]},{"label":["author"],"name":[3],"type":["chr"],"align":["left"]},{"label":["gutenberg_author_id"],"name":[4],"type":["int"],"align":["right"]},{"label":["language"],"name":[5],"type":["chr"],"align":["left"]},{"label":["gutenberg_bookshelf"],"name":[6],"type":["chr"],"align":["left"]},{"label":["rights"],"name":[7],"type":["chr"],"align":["left"]},{"label":["has_text"],"name":[8],"type":["lgl"],"align":["right"]}],"data":[{"1":"35","2":"The Time Machine","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction/Movie Books","7":"Public domain in the USA.","8":"TRUE"},{"1":"36","2":"The War of the Worlds","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Movie Books/Science Fiction","7":"Public domain in the USA.","8":"TRUE"},{"1":"159","2":"The Island of Doctor Moreau","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Best Books Ever Listings/Science Fiction/Movie Books","7":"Public domain in the USA.","8":"TRUE"},{"1":"456","2":"The Door in the Wall, and Other Stories","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Public domain in the USA.","8":"TRUE"},{"1":"524","2":"Ann Veronica: A Modern Love Story","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"718","2":"Tono-Bungay","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Best Books Ever Listings","7":"Public domain in the USA.","8":"TRUE"},{"1":"775","2":"When the Sleeper Wakes","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Public domain in the USA.","8":"TRUE"},{"1":"780","2":"The War in the Air","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"1013","2":"The First Men in the Moon","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction/Movie Books","7":"Public domain in the USA.","8":"TRUE"},{"1":"1046","2":"God, the Invisible King","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Bestsellers, American, 1895-1923","7":"Public domain in the USA.","8":"TRUE"},{"1":"1047","2":"The New Machiavelli","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"1059","2":"The World Set Free","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Public domain in the USA.","8":"TRUE"},{"1":"1138","2":"The Research Magnificent","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"1264","2":"The Wheels of Chance: A Bicycling Idyll","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"1269","2":"The Soul of a Bishop","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"1734","2":"The Secret Places of the Heart","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"1743","2":"Twelve Stories and a Dream","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Public domain in the USA.","8":"TRUE"},{"1":"1804","2":"War and the Future: Italy, France and Britain at War","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Bestsellers, American, 1895-1923/World War I","7":"Public domain in the USA.","8":"TRUE"},{"1":"3690","2":"Floor Games; a companion volume to \"Little Wars\"","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"3691","2":"Little Wars; a game for boys from twelve years of age to one hundred and fifty and for that more intelligent sort of girl who likes boys' games and books.","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"3797","2":"In the Days of the Comet","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"4225","2":"First and Last Things: A Confession of Faith and Rule of Life","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"5230","2":"The Invisible Man: A Grotesque Romance","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Movie Books","7":"Public domain in the USA.","8":"TRUE"},{"1":"6424","2":"A Modern Utopia","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"6620","2":"The Time Machine","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Movie Books/Science Fiction","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"7058","2":"Mankind in the Making","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"7308","2":"The History of Mr. Polly","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"8965","2":"Floor Games","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8966","2":"Secret Places of the Heart","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8967","2":"The Door in the Wall and Other Stories","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8968","2":"The World Set Free","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8969","2":"The War in the Air","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8970","2":"Twelve Stories and a Dream","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8971","2":"The Island of Doctor Moreau","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction/Movie Books","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8972","2":"The First Men in the Moon","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8973","2":"Little Wars","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8974","2":"The Invisible Man: A Grotesque Romance","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Movie Books","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8975","2":"The Research Magnificent","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8976","2":"The War of the Worlds","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Movie Books/Science Fiction","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8977","2":"The Wheels of Chance","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"8978","2":"When the Sleeper Wakes","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"10291","2":"In the Fourth Year: Anticipations of a World Peace","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"World War I","7":"Public domain in the USA.","8":"TRUE"},{"1":"11289","2":"What is Coming? A Forecast of Things after the War","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"World War I","7":"Public domain in the USA.","8":"TRUE"},{"1":"11502","2":"An Englishman Looks at the World\\r\\nBeing a Series of Unrestrained Remarks upon Contemporary Matters","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"11640","2":"Love and Mr. Lewisham","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"11696","2":"The Food of the Gods and How It Came to Earth","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Contemporary Reviews/Science Fiction/Movie Books","7":"Public domain in the USA.","8":"TRUE"},{"1":"11870","2":"The Country of the Blind, and Other Stories","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Public domain in the USA.","8":"TRUE"},{"1":"12163","2":"The Sleeper Awakes\\nA Revised Edition of When the Sleeper Wakes","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Public domain in the USA.","8":"TRUE"},{"1":"12750","2":"The Stolen Bacillus and Other Incidents","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Public domain in the USA.","8":"TRUE"},{"1":"14060","2":"Mr. Britling Sees It Through","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Bestsellers, American, 1895-1923/World War I","7":"Public domain in the USA.","8":"TRUE"},{"1":"17401","2":"The Time Machine","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Movie Books","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"17508","2":"Certain Personal Matters","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"19229","2":"Anticipations\\r\\nOf the Reaction of Mechanical and Scientific Progress upon Human life and Thought","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"21781","2":"Text Book of Biology, Part 1: Vertebrata","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Biology","7":"Public domain in the USA.","8":"TRUE"},{"1":"23218","2":"The Red Room","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"26246","2":"The Invisible Man: A Grotesque Romance","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"FALSE"},{"1":"26290","2":"War of the Worlds","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"FALSE"},{"1":"26291","2":"The War of the Worlds","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"FALSE"},{"1":"26578","2":"Little Wars (A Game for Boys from twelve years of age to one hundred\\nand fifty and for that more intelligent sort of girl who likes boys'\\ngames and books)","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"FALSE"},{"1":"27365","2":"Tales of Space and Time","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Science Fiction","7":"Public domain in the USA.","8":"TRUE"},{"1":"28840","2":"The Island of Dr. Moreau","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"FALSE"},{"1":"29472","2":"Select Conversations with an Uncle (Now Extinct) and Two Other Reminiscences","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"30340","2":"The Passionate Friends","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"30538","2":"New Worlds For Old: A Plain Account of Modern Socialism","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"30855","2":"The Wife of Sir Isaac Harman","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"33889","2":"The Salvaging Of Civilization","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"World War I","7":"Public domain in the USA.","8":"TRUE"},{"1":"33913","2":"The Wonderful Visit","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"34921","2":"Mankind in the Making","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Copyrighted. Read the copyright notice inside this book for details.","8":"FALSE"},{"1":"34962","2":"Boon, The Mind of the Race, The Wild Asses of the Devil, and The Last Trump;\\r\\nBeing a First Selection from the Literary Remains of George Boon, Appropriate to the Times","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"35338","2":"Marriage","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"35461","2":"A Short History of the World","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"35920","2":"The Sea Lady","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"36982","2":"Het voedsel der Goden en hoe het op Aarde kwam","3":"Wells, H. G. (Herbert George)","4":"30","5":"nl","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"39162","2":"Kipps: The Story of a Simple Soul","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"42989","2":"The Plattner Story and Others","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"44867","2":"The Discovery of the Future\\nA Discourse Delivered at the Royal Institution","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"45368","2":"The Outline of History: Being a Plain History of Life and Mankind","3":"Wells, H. G. (Herbert George)","4":"30","5":"en","6":"Bestsellers, American, 1895-1923","7":"Public domain in the USA.","8":"TRUE"},{"1":"46575","2":"Kauhun saari","3":"Wells, H. G. (Herbert George)","4":"30","5":"fi","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"46589","2":"Aikakone","3":"Wells, H. G. (Herbert George)","4":"30","5":"fi","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"46638","2":"Näkymätön mies","3":"Wells, H. G. (Herbert George)","4":"30","5":"fi","6":"NA","7":"Public domain in the USA.","8":"TRUE"},{"1":"51529","2":"Kun nukkuja herää\\nRomaani","3":"Wells, H. G. (Herbert George)","4":"30","5":"fi","6":"NA","7":"Public domain in the USA.","8":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Para pegar os dados, quebrar em diversas linhas e remover stop words, podemos:</p>
<!-- ```{r, message=F} -->
<!-- hgwells <- gutenbergr::gutenberg_download( -->
<!--   c(35, 36, 159, 5230) -->
<!-- ) -->
<!-- tidy_hgwells <- hgwells %>% -->
<!--   tidytext::unnest_tokens(word, text) %>% -->
<!--   anti_join(tidytext::stop_words) -->
<!-- tidy_hgwells %>% head(20) -->
<!-- ``` -->
<!-- Quais são as palavras mais utilizadas? -->
<!-- ```{r} -->
<!-- tidy_hgwells %>% -->
<!--   count(word, sort = TRUE) %>%  -->
<!--   filter(n > 150) %>%  -->
<!--   mutate(word = reorder(word, n)) %>%  -->
<!--   ggplot(aes(word, n)) +  -->
<!--   geom_col() +  -->
<!--   coord_flip() -->
<!-- ``` -->
<!-- ### Bronte -->
<!-- Fazendo o mesmo tratamento para os livros do Bronte, temos: -->
<!-- ```{r, message=F} -->
<!-- bronte <- gutenbergr::gutenberg_download( -->
<!--   c(1260, 768, 969, 9182, 767) -->
<!-- ) -->
<!-- tidy_bronte <- bronte %>% -->
<!--   tidytext::unnest_tokens(word, text) %>% -->
<!--   anti_join(tidytext::stop_words) -->
<!-- tidy_bronte %>% -->
<!--   count(word, sort = TRUE) %>%  -->
<!--   filter(n > 500) %>%  -->
<!--   mutate(word = reorder(word, n)) %>%  -->
<!--   ggplot(aes(word, n)) +  -->
<!--   geom_col() +  -->
<!--   coord_flip() -->
<!-- ``` -->
<!-- ```{r} -->
<!-- frequency <- bind_rows( -->
<!--   mutate(tidy_bronte, author = "Brontë Sisters"), -->
<!--   mutate(tidy_hgwells, author = "H.G. Wells"), -->
<!--   mutate(tidy_books, author = "Jane Austen") -->
<!-- ) %>%  -->
<!--   mutate( -->
<!--     word = stringr::str_extract(word, "[a-z']+") -->
<!--   ) %>%  -->
<!--   count(author, word) %>%  -->
<!--   mutate(prop = n/sum(n)) %>%  -->
<!--   select(-n) %>%  -->
<!--   tidyr::spread(author, prop, fill = 0) -->
<!-- frequency -->
<!-- ``` -->
<!-- ```{r} -->
<!-- frequency <- frequency %>%  -->
<!--   gather(author, proportion, `Brontë Sisters`:`H.G. Wells`)  -->
<!-- frequency %>%  -->
<!--   na.omit() %>%  -->
<!--   ggplot( -->
<!--     aes( -->
<!--       x = proportion,  -->
<!--       y = `Jane Austen`,  -->
<!--       color = abs(`Jane Austen` - proportion) -->
<!--     ) -->
<!--   ) + -->
<!--   geom_abline(color = "gray40", lty = 2) + -->
<!--   geom_jitter( -->
<!--     alpha = 0.1, size = 2.5, width = 0.3, height = 0.3 -->
<!--   ) + -->
<!--   geom_text( -->
<!--     aes(label = word),  -->
<!--     check_overlap = TRUE, vjust = 1.5 -->
<!--   ) +  -->
<!--   scale_x_log10( -->
<!--     labels = scales::percent_format() -->
<!--   ) + -->
<!--   scale_y_log10( -->
<!--     labels = scales::percent_format() -->
<!--   ) + -->
<!--   scale_color_gradient( -->
<!--     limits = c(0, 0.001), low = "darkslategray4",  -->
<!--     high = "gray75" -->
<!--   ) + -->
<!--   facet_wrap(~author, ncol = 2) + -->
<!--   theme(legend.position="none") + -->
<!--   labs(y = "Jane Austen", x = NULL) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- cor.test( -->
<!--   data = frequency[frequency$author == "Brontë Sisters",], -->
<!--   ~ proportion + `Jane Austen` -->
<!-- ) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- cor.test( -->
<!--   data = frequency[frequency$author == "H.G. Wells",],  -->
<!--   ~ proportion + `Jane Austen` -->
<!-- ) -->
<!-- ``` -->
<!-- # Análise de sentimentos -->
<!-- ```{r} -->
<!-- tidytext::get_sentiments("afinn") %>% head(20) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- tidytext::get_sentiments("bing") %>% head(20) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- tidytext::get_sentiments("nrc") %>% head(20) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- tidy_books %>% head(20) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- nrc_joy <- tidytext::get_sentiments("nrc") %>%  -->
<!--   filter(sentiment == "joy") -->
<!-- ``` -->
<!-- ```{r, message=F} -->
<!-- tidy_books %>%  -->
<!--   filter(book=="Emma") %>%  -->
<!--   inner_join(nrc_joy) %>%  -->
<!--   count(word, sort=T) %>%  -->
<!--   head(20) -->
<!-- ``` -->
</div>
</div>
</div>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="../../../../index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="../../../../images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="../../../../js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'Ua-93877401-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

